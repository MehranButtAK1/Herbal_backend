<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Herbal API Tool</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="container">
    <h1>üåø Herbal API Testing Tool</h1>

    <label>API Endpoint:</label>
    <input type="text" id="url" value="https://herbalbackend-production.up.railway.app/products">

    <label>HTTP Method:</label>
    <select id="method">
      <option>GET</option>
      <option>POST</option>
      <option>PUT</option>
      <option>DELETE</option>
    </select>

    <label>Admin Password (for POST/PUT/DELETE):</label>
    <input type="password" id="adminPassword" placeholder="Enter admin password">

    <label>Request Body (JSON):</label>
    <textarea id="bodyInput" placeholder='{"name":"Test","category":"Herbal","price":123,"image":"url"}'></textarea>

    <button onclick="sendRequest()">üöÄ Send Request</button>

    <h2>Response:</h2>
    <pre id="responseOutput"></pre>
  </div>

  <script>
    async function sendRequest() {
      const url = document.getElementById("url").value;
      const method = document.getElementById("method").value;
      const bodyInput = document.getElementById("bodyInput").value;
      const adminPassword = document.getElementById("adminPassword").value;

      let options = {
        method,
        headers: {
          "Content-Type": "application/json",
        },
      };

      // Add password header only if POST/PUT/DELETE
      if (["POST", "PUT", "DELETE"].includes(method)) {
        options.headers["x-admin-password"] = adminPassword;
      }

      // Add body if POST/PUT
      if (["POST", "PUT"].includes(method) && bodyInput.trim() !== "") {
        try {
          options.body = JSON.stringify(JSON.parse(bodyInput));
        } catch (e) {
          document.getElementById("responseOutput").textContent = "‚ùå Invalid JSON body!";
          return;
        }
      }

      try {
        const res = await fetch(url, options);
        const data = await res.json();
        document.getElementById("responseOutput").textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById("responseOutput").textContent = "‚ö†Ô∏è Error: " + err.message;
      }
    }
  </script>
</body>
</html>
